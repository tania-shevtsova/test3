{"version":3,"sources":["pages/MoviesPage.js"],"names":["queryString","require","activeStyle","color","inputStyle","width","MoviesPage","state","movies","value","hasError","error","componentDidMount","a","location","props","parse","search","query","BASE_URL","axios","get","then","setState","data","results","console","log","componentDidUpdate","prevProps","length","PNotify","closeAll","notice","history","replace","e","handleChange","target","handleSubmit","preventDefault","push","pathname","this","onSubmit","style","onChange","type","map","el","key","shortid","to","id","from","locationLink","original_title","Component"],"mappings":"4PAMMA,EAAcC,EAAQ,IAEtBC,EAAc,CAClBC,MAAO,iBAGHC,EAAa,CACjBC,MAAO,SAGHC,E,2MACJC,MAAQ,CACNC,OAAQ,GACRC,MAAO,GACPC,UAAU,EACVC,MAAO,I,EAGTC,kB,sBAAoB,kCAAAC,EAAA,yDACVC,EAAa,EAAKC,MAAlBD,SADU,EAEAd,EAAYgB,MAAMF,EAASG,QAArCC,EAFU,EAEVA,MACFC,EAHY,6IAGqID,GAHrI,UAKZA,EALY,gCAMRE,IAAMC,IAAIF,GAAUG,MAAK,SAAAd,GAC7B,EAAKe,SAAS,CACZf,OAAQA,EAAOgB,KAAKC,aARV,uDAahBC,QAAQC,IAAI,QAAZ,MAbgB,yD,EAiBpBC,mBAAqB,SAAAC,GAAc,IACzBf,EAAa,EAAKC,MAAlBD,SACAI,EAAUlB,EAAYgB,MAAMF,EAASG,QAArCC,MACFC,EAAQ,6IAAyID,GAEvJ,IACE,GAAIW,EAAUf,SAASG,SAAWH,EAASG,OAYzC,YAXAG,IAAMC,IAAIF,GAAUG,MAAK,SAAAd,GACY,IAA/BA,EAAOgB,KAAKC,QAAQK,OACtB,EAAKP,SAAS,CACZf,OAAQA,EAAOgB,KAAKC,WAGtBM,IAAQC,WACRD,IAAQE,OAAO,8CACf,EAAKlB,MAAMmB,QAAQC,QAAQ,eAKjC,MAAOC,GACPV,QAAQC,IAAI,QAASS,K,EAIzBC,aAAe,SAAAD,GACbL,IAAQC,WACR,EAAKT,SAAS,CACZd,MAAO2B,EAAEE,OAAO7B,S,EAIpB8B,aAAe,SAAAH,GACbA,EAAEI,iBAEuB,KAArB,EAAKjC,MAAME,OACb,EAAKM,MAAMmB,QAAQO,KAAK,KAG1B,EAAKlB,SAAS,CACZd,MAAO,KAGT,EAAKM,MAAMmB,QAAQO,KAAK,CACtBC,SAAU,EAAK3B,MAAMD,SAAS4B,SAC9BzB,OAAO,SAAD,OAAW,EAAKV,MAAME,U,wEAItB,IAAD,SACmBkC,KAAKpC,MAAvBE,EADD,EACCA,MAAOD,EADR,EACQA,OAEf,OACE,oCACE,0BAAMoC,SAAUD,KAAKJ,cACnB,2BACEM,MAAOzC,EACP0C,SAAUH,KAAKN,aACf5B,MAAOA,IAGT,4BAAQsC,KAAK,UAAb,WAGF,4BACGvC,EAAOwC,KAAI,SAAAC,GAAE,OACZ,wBAAIC,IAAKC,OACP,kBAAC,IAAD,CACEC,GAAI,CACFV,SAAS,WAAD,OAAaO,EAAGI,IACxB9C,MAAO,CACL+C,KAAM,EAAKvC,MAAMD,SACjByC,aACE,EAAKxC,MAAMD,SAAS4B,SAAW,EAAK3B,MAAMD,SAASG,SAGzDf,YAAaA,GAEZ+C,EAAGO,0B,GAvGKC,aAiHVnD","file":"static/js/5.74fe711f.chunk.js","sourcesContent":["import React, { Component } from \"react\";\nimport PNotify from \"pnotify/dist/es/PNotify\";\nimport PNotifyBrightTheme from \"../../node_modules/pnotify/dist/PNotifyBrightTheme.css\";\nimport axios from \"axios\";\nimport shortid from \"shortid\";\nimport { NavLink} from \"react-router-dom\";\nconst queryString = require(\"query-string\");\n\nconst activeStyle = {\n  color: \"palevioletred\"\n};\n\nconst inputStyle = {\n  width: \"250px\"\n};\n\nclass MoviesPage extends Component {\n  state = {\n    movies: [],\n    value: \"\",\n    hasError: false,\n    error: \"\"\n  };\n\n  componentDidMount = async () => {\n    const { location } = this.props;\n    const { query } = queryString.parse(location.search);\n    const BASE_URL = `https://api.themoviedb.org/3/search/movie?api_key=cf7e1750a0f8b90bb35162b1428fcf90&language=en-US&page=1&include_adult=false&query=${query}`;\n    try {\n      if (query) {\n        await axios.get(BASE_URL).then(movies => {\n          this.setState({\n            movies: movies.data.results\n          });\n        });\n      }\n    } catch (e) {\n      console.log(\"Error\", e);\n    }\n  };\n\n  componentDidUpdate = prevProps => {\n    const { location } = this.props;\n    const { query } = queryString.parse(location.search);\n    const BASE_URL = `https://api.themoviedb.org/3/search/movie?api_key=cf7e1750a0f8b90bb35162b1428fcf90&language=en-US&page=1&include_adult=false&query=${query}`;\n\n    try {\n      if (prevProps.location.search !== location.search) {\n        axios.get(BASE_URL).then(movies => {\n          if (movies.data.results.length !== 0) {\n            this.setState({\n              movies: movies.data.results\n            });\n          } else {\n            PNotify.closeAll();\n            PNotify.notice(\"Nothing was found 🤷🏾\");\n            this.props.history.replace(\"/movies\");\n          }\n        });\n        return;\n      }\n    } catch (e) {\n      console.log(\"Error\", e);\n    }\n  };\n\n  handleChange = e => {\n    PNotify.closeAll();\n    this.setState({\n      value: e.target.value\n    });\n  };\n\n  handleSubmit = e => {\n    e.preventDefault();\n\n    if (this.state.value === \"\") {\n      this.props.history.push(\"/\");\n    }\n\n    this.setState({\n      value: \"\"\n    });\n\n    this.props.history.push({\n      pathname: this.props.location.pathname,\n      search: `query=${this.state.value}`\n    });\n  };\n\n  render() {\n    const { value, movies } = this.state;\n\n    return (\n      <>\n        <form onSubmit={this.handleSubmit}>\n          <input\n            style={inputStyle}\n            onChange={this.handleChange}\n            value={value}\n          ></input>\n\n          <button type=\"submit\">Search</button>\n        </form>\n\n        <ul>\n          {movies.map(el => (\n            <li key={shortid()}>\n              <NavLink\n                to={{\n                  pathname: `/movies/${el.id}`,\n                  state: {\n                    from: this.props.location,\n                    locationLink:\n                      this.props.location.pathname + this.props.location.search\n                  }\n                }}\n                activeStyle={activeStyle}\n              >\n                {el.original_title}\n              </NavLink>\n            </li>\n          ))}\n        </ul>\n      </>\n    );\n  }\n}\n\nexport default MoviesPage;\n"],"sourceRoot":""}